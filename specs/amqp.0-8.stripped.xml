<?xml version="1.0"?>

<!--
(c) Copyright JPMorgan Chase Bank & Co., Cisco Systems, Inc., Envoy
Technologies Inc., iMatix Corporation, IONA\ufffd Technologies, Red
Hat, Inc., TWIST Process Innovations, and 29West Inc. 2006.

Copyright (c) 2009 AMQP Working Group.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions
are met:
1. Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.
3. The name of the author may not be used to endorse or promote products
derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->

<amqp comment="AMQ protocol 0.80" major="8" port="5672" minor="0">
  <constant name="frame method" value="1"/>
  <constant name="frame header" value="2"/>
  <constant name="frame body" value="3"/>
  <constant name="frame oob method" value="4"/>
  <constant name="frame oob header" value="5"/>
  <constant name="frame oob body" value="6"/>
  <constant name="frame trace" value="7"/>
  <constant name="frame heartbeat" value="8"/>
  <constant name="frame min size" value="4096"/>
  <constant name="frame end" value="206"/>
  <constant name="reply success" value="200"/>
  <constant name="not delivered" class="soft error" value="310"/>
  <constant name="content too large" class="soft error" value="311"/>
  <constant name="connection forced" class="hard error" value="320"/>
  <constant name="invalid path" class="hard error" value="402"/>
  <constant name="access refused" class="soft error" value="403"/>
  <constant name="not found" class="soft error" value="404"/>
  <constant name="resource locked" class="soft error" value="405"/>
  <constant name="frame error" class="hard error" value="501"/>
  <constant name="syntax error" class="hard error" value="502"/>
  <constant name="command invalid" class="hard error" value="503"/>
  <constant name="channel error" class="hard error" value="504"/>
  <constant name="resource error" class="hard error" value="506"/>
  <constant name="not allowed" class="hard error" value="530"/>
  <constant name="not implemented" class="hard error" value="540"/>
  <constant name="internal error" class="hard error" value="541"/>
  <domain name="access ticket" type="short">
    <assert check="ne" value="0"/>
  </domain>
  <domain name="class id" type="short"/>
  <domain name="consumer tag" type="shortstr">
    <rule implement="MUST"/>
  </domain>
  <domain name="delivery tag" type="longlong">
    <rule implement="MUST"/>
    <rule implement="MUST"/>
  </domain>
  <domain name="exchange name" type="shortstr">
    <assert check="length" value="127"/>
  </domain>
  <domain name="known hosts" type="shortstr">
    <rule implement="MAY"/>
  </domain>
  <domain name="method id" type="short"/>
  <domain name="no ack" type="bit"/>
  <domain name="no local" type="bit"/>
  <domain name="path" type="shortstr">
    <assert check="notnull"/>
    <assert check="syntax" rule="path"/>
    <assert check="length" value="127"/>
  </domain>
  <domain name="peer properties" type="table">
    <rule implement="SHOULD"/>
  </domain>
  <domain name="queue name" type="shortstr">
    <assert check="length" value="127"/>
  </domain>
  <domain name="redelivered" type="bit">
    <rule implement="SHOULD"/>
    <rule implement="MUST"/>
  </domain>
  <domain name="reply code" type="short">
    <assert check="notnull"/>
  </domain>
  <domain name="reply text" type="shortstr">
    <assert check="notnull"/>
  </domain>
  <class name="connection" index="10" handler="connection">
    <chassis name="server" implement="MUST"/>
    <chassis name="client" implement="MUST"/>
    <method name="start" index="10" synchronous="1">
      <rule implement="MUST"/>
      <rule implement="MUST"/>
      <chassis name="client" implement="MUST"/>
      <response name="start-ok"/>
      <field name="version major" type="octet"/>
      <field name="version minor" type="octet"/>
      <field name="server properties" domain="peer properties"/>
      <field name="mechanisms" type="longstr">
        <see name="security mechanisms"/>
        <assert check="notnull"/>
      </field>
      <field name="locales" type="longstr">
        <rule implement="MUST"/>
        <assert check="notnull"/>
      </field>
    </method>
    <method name="start-ok" index="11" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <field name="client properties" domain="peer properties"/>
      <field name="mechanism" type="shortstr">
        <rule implement="SHOULD"/>
        <rule implement="MUST"/>
        <assert check="notnull"/>
      </field>
      <field name="response" type="longstr">
        <assert check="notnull"/>
      </field>
      <field name="locale" type="shortstr">
        <assert check="notnull"/>
      </field>
    </method>
    <method name="secure" index="20" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <response name="secure-ok"/>
      <field name="challenge" type="longstr">
        <see name="security mechanisms"/>
      </field>
    </method>
    <method name="secure-ok" index="21" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <field name="response" type="longstr">
        <assert check="notnull"/>
      </field>
    </method>
    <method name="tune" index="30" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <response name="tune-ok"/>
      <field name="channel max" type="short"/>
      <field name="frame max" type="long">
        <rule implement="MUST"/>
      </field>
      <field name="heartbeat" type="short"/>
    </method>
    <method name="tune-ok" index="31" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <field name="channel max" type="short">
        <rule implement="MAY"/>
        <assert check="notnull"/>
        <assert field="channel max" check="le" method="tune"/>
      </field>
      <field name="frame max" type="long">
        <rule implement="MUST"/>
      </field>
      <field name="heartbeat" type="short"/>
    </method>
    <method name="open" index="40" synchronous="1">
      <rule implement="MUST"/>
      <chassis name="server" implement="MUST"/>
      <response name="open-ok"/>
      <response name="redirect"/>
      <field name="virtual host" domain="path">
        <assert check="regexp" value="^[a-zA-Z0-9/-_]+$"/>
        <rule implement="MUST"/>
        <rule implement="SHOULD"/>
        <rule implement="MAY"/>
      </field>
      <field name="capabilities" type="shortstr"/>
      <field name="insist" type="bit">
        <rule implement="SHOULD"/>
      </field>
    </method>
    <method name="open-ok" index="41" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <field name="known hosts" domain="known hosts"/>
    </method>
    <method name="redirect" index="50" synchronous="1">
      <rule implement="SHOULD"/>
      <chassis name="client" implement="MAY"/>
      <field name="host" type="shortstr">
        <assert check="notnull"/>
      </field>
      <field name="known hosts" domain="known hosts"/>
    </method>
    <method name="close" index="60" synchronous="1">
      <rule implement="MUST"/>
      <rule implement="MAY"/>
      <rule implement="MUST"/>
      <chassis name="client" implement="MUST"/>
      <chassis name="server" implement="MUST"/>
      <response name="close-ok"/>
      <field name="reply code" domain="reply code"/>
      <field name="reply text" domain="reply text"/>
      <field name="class id" domain="class id"/>
      <field name="method id" domain="method id"/>
    </method>
    <method name="close-ok" index="61" synchronous="1">
      <rule implement="SHOULD"/>
      <chassis name="client" implement="MUST"/>
      <chassis name="server" implement="MUST"/>
    </method>
  </class>
  <class name="channel" index="20" handler="channel">
    <chassis name="server" implement="MUST"/>
    <chassis name="client" implement="MUST"/>
    <method name="open" index="10" synchronous="1">
      <rule implement="MUST"/>
      <chassis name="server" implement="MUST"/>
      <response name="open-ok"/>
      <field name="out of band" type="shortstr">
        <assert check="null"/>
      </field>
    </method>
    <method name="open-ok" index="11" synchronous="1">
      <chassis name="client" implement="MUST"/>
    </method>
    <method name="flow" index="20" synchronous="1">
      <rule implement="MAY"/>
      <rule implement="SHOULD"/>
      <rule implement="MAY"/>
      <rule implement="MAY"/>
      <chassis name="server" implement="MUST"/>
      <chassis name="client" implement="MUST"/>
      <response name="flow-ok"/>
      <field name="active" type="bit"/>
    </method>
    <method name="flow-ok" index="21">
      <chassis name="server" implement="MUST"/>
      <chassis name="client" implement="MUST"/>
      <field name="active" type="bit"/>
    </method>
    <method name="alert" index="30">
      <chassis name="client" implement="MUST"/>
      <field name="reply code" domain="reply code"/>
      <field name="reply text" domain="reply text"/>
      <field name="details" type="table"/>
    </method>
    <method name="close" index="40" synchronous="1">
      <rule implement="MUST"/>
      <rule implement="MAY"/>
      <chassis name="client" implement="MUST"/>
      <chassis name="server" implement="MUST"/>
      <response name="close-ok"/>
      <field name="reply code" domain="reply code"/>
      <field name="reply text" domain="reply text"/>
      <field name="class id" domain="class id"/>
      <field name="method id" domain="method id"/>
    </method>
    <method name="close-ok" index="41" synchronous="1">
      <rule implement="SHOULD"/>
      <chassis name="client" implement="MUST"/>
      <chassis name="server" implement="MUST"/>
    </method>
  </class>
  <class name="access" index="30" handler="connection">
    <chassis name="server" implement="MUST"/>
    <chassis name="client" implement="MUST"/>
    <method name="request" index="10" synchronous="1">
      <rule implement="MUST"/>
      <rule implement="MUST"/>
      <chassis name="server" implement="MUST"/>
      <response name="request-ok"/>
      <field name="realm" domain="path">
        <rule implement="MUST"/>
      </field>
      <field name="exclusive" type="bit"/>
      <field name="passive" type="bit"/>
      <field name="active" type="bit"/>
      <field name="write" type="bit"/>
      <field name="read" type="bit"/>
    </method>
    <method name="request-ok" index="11" synchronous="1">
      <rule implement="MUST"/>
      <rule implement="MUST"/>
      <chassis name="client" implement="MUST"/>
      <field name="ticket" domain="access ticket"/>
    </method>
  </class>
  <class name="exchange" index="40" handler="channel">
    <chassis name="server" implement="MUST"/>
    <chassis name="client" implement="MUST"/>
    <rule implement="MUST">
      <test/>
    </rule>
    <rule implement="SHOULD">
      <test/>
    </rule>
    <rule implement="MAY">
      <test/>
    </rule>
    <rule implement="MUST">
      <test/>
    </rule>
    <method name="declare" index="10" synchronous="1">
      <rule implement="SHOULD">
        <test/>
      </rule>
      <chassis name="server" implement="MUST"/>
      <response name="declare-ok"/>
      <field name="ticket" domain="access ticket">
        <rule implement="MUST"/>
      </field>
      <field name="exchange" domain="exchange name">
        <rule implement="MUST">
          <test/>
        </rule>
        <assert check="regexp" value="^[a-zA-Z0-9-_.:]+$"/>
      </field>
      <field name="type" type="shortstr">
        <rule implement="MUST">
          <test/>
        </rule>
        <rule implement="MUST">
          <test/>
        </rule>
        <assert check="regexp" value="^[a-zA-Z0-9-_.:]+$"/>
      </field>
      <field name="passive" type="bit">
        <rule implement="MUST">
          <test/>
        </rule>
      </field>
      <field name="durable" type="bit">
        <rule implement="MUST">
          <test/>
        </rule>
        <rule implement="MUST"/>
      </field>
      <field name="auto delete" type="bit">
        <rule implement="SHOULD">
          <test/>
        </rule>
        <rule implement="MUST">
          <test/>
        </rule>
      </field>
      <field name="internal" type="bit"/>
      <field name="nowait" type="bit"/>
      <field name="arguments" type="table"/>
    </method>
    <method name="declare-ok" index="11" synchronous="1">
      <chassis name="client" implement="MUST"/>
    </method>
    <method name="delete" index="20" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <response name="delete-ok"/>
      <field name="ticket" domain="access ticket">
        <rule implement="MUST"/>
      </field>
      <field name="exchange" domain="exchange name">
        <rule implement="MUST">
          <test/>
        </rule>
        <assert check="notnull"/>
      </field>
      <field name="if unused" type="bit">
        <rule implement="SHOULD">
          <test/>
        </rule>
        <rule implement="SHOULD">
          <test/>
        </rule>
      </field>
      <field name="nowait" type="bit"/>
    </method>
    <method name="delete-ok" index="21" synchronous="1">
      <chassis name="client" implement="MUST"/>
    </method>
    <method name="bound" index="22" synchronous="1">
      <chassis name="server" implement="SHOULD"/>
      <field name="exchange" domain="exchange name"/>
      <field name="routing key" type="shortstr"/>
      <field name="queue" domain="queue name"/>
    </method>
    <method name="bound-ok" index="23" synchronous="1">
      <field name="reply code" domain="reply code"/>
      <field name="reply text" domain="reply text"/>
      <chassis name="client" implement="SHOULD"/>
    </method>
  </class>
  <class name="queue" index="50" handler="channel">
    <chassis name="server" implement="MUST"/>
    <chassis name="client" implement="MUST"/>
    <rule implement="MUST">
      <test/>
    </rule>
    <method name="declare" index="10" synchronous="1">
      <rule implement="MUST">
        <test/>
      </rule>
      <rule implement="SHOULD">
        <test/>
      </rule>
      <chassis name="server" implement="MUST"/>
      <response name="declare-ok"/>
      <field name="ticket" domain="access ticket"/>
      <field name="queue" domain="queue name">
        <rule implement="MAY">
          <test/>
        </rule>
        <rule implement="MUST">
          <test/>
        </rule>
        <assert check="regexp" value="^[a-zA-Z0-9-_.:]*$"/>
      </field>
      <field name="passive" type="bit">
        <rule implement="MUST">
          <test/>
        </rule>
      </field>
      <field name="durable" type="bit">
        <rule implement="MUST">
          <test/>
        </rule>
        <rule implement="MUST">
          <test/>
        </rule>
        <rule implement="MUST">
          <test/>
        </rule>
      </field>
      <field name="exclusive" type="bit">
        <rule implement="MUST">
          <test/>
        </rule>
        <rule implement="MUST">
          <test/>
        </rule>
      </field>
      <field name="auto delete" type="bit">
        <rule implement="SHOULD">
          <test/>
        </rule>
        <rule implement="MUST">
          <test/>
        </rule>
      </field>
      <field name="nowait" type="bit"/>
      <field name="arguments" type="table"/>
    </method>
    <method name="declare-ok" index="11" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <field name="queue" domain="queue name">
        <assert check="notnull"/>
      </field>
      <field name="message count" type="long"/>
      <field name="consumer count" type="long"/>
    </method>
    <method name="bind" index="20" synchronous="1">
      <rule implement="MUST">
        <test/>
      </rule>
      <rule implement="MUST">
        <test/>
      </rule>
      <rule implement="MUST">
        <test/>
      </rule>
      <rule implement="SHOULD">
        <test/>
      </rule>
      <rule implement="MUST">
        <test/>
      </rule>
      <rule implement="SHOULD">
        <test/>
      </rule>
      <chassis name="server" implement="MUST"/>
      <response name="bind-ok"/>
      <field name="ticket" domain="access ticket"/>
      <field name="queue" domain="queue name"/>
      <field name="exchange" domain="exchange name">
        <rule implement="MUST">
          <test/>
        </rule>
      </field>
      <field name="routing key" type="shortstr"/>
      <field name="nowait" type="bit"/>
      <field name="arguments" type="table"/>
    </method>
    <method name="bind-ok" index="21" synchronous="1">
      <chassis name="client" implement="MUST"/>
    </method>
    <method name="purge" index="30" synchronous="1">
      <rule implement="MUST">
        <test/>
      </rule>
      <rule implement="MUST">
        <test/>
      </rule>
      <rule implement="MAY">
        <test/>
      </rule>
      <chassis name="server" implement="MUST"/>
      <response name="purge-ok"/>
      <field name="ticket" domain="access ticket">
        <rule implement="MUST"/>
      </field>
      <field name="queue" domain="queue name"/>
      <field name="nowait" type="bit"/>
    </method>
    <method name="purge-ok" index="31" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <field name="message count" type="long"/>
    </method>
    <method name="delete" index="40" synchronous="1">
      <rule implement="SHOULD">
        <test/>
      </rule>
      <chassis name="server" implement="MUST"/>
      <response name="delete-ok"/>
      <field name="ticket" domain="access ticket"/>
      <field name="queue" domain="queue name"/>
      <field name="if unused" type="bit">
        <rule implement="MUST">
          <test/>
          <test/>
        </rule>
      </field>
      <field name="if empty" type="bit">
        <test/>
      </field>
      <field name="nowait" type="bit"/>
    </method>
    <method name="delete-ok" index="41" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <field name="message count" type="long"/>
    </method>
  </class>
  <class name="basic" index="60" handler="channel">
    <chassis name="server" implement="MUST"/>
    <chassis name="client" implement="MAY"/>
    <field name="content type" type="shortstr"/>
    <field name="content encoding" type="shortstr"/>
    <field name="headers" type="table"/>
    <field name="delivery mode" type="octet"/>
    <field name="priority" type="octet"/>
    <field name="correlation id" type="shortstr"/>
    <field name="reply to" type="shortstr"/>
    <field name="expiration" type="shortstr"/>
    <field name="message id" type="shortstr"/>
    <field name="timestamp" type="timestamp"/>
    <field name="type" type="shortstr"/>
    <field name="user id" type="shortstr"/>
    <field name="app id" type="shortstr"/>
    <field name="cluster id" type="shortstr"/>
    <method name="qos" index="10" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <response name="qos-ok"/>
      <field name="prefetch size" type="long"/>
      <field name="prefetch count" type="short"/>
      <field name="global" type="bit"/>
    </method>
    <method name="qos-ok" index="11" synchronous="1">
      <chassis name="client" implement="MUST"/>
    </method>
    <method name="consume" index="20" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <response name="consume-ok"/>
      <field name="ticket" domain="access ticket"/>
      <field name="queue" domain="queue name"/>
      <field name="consumer tag" domain="consumer tag"/>
      <field name="no local" domain="no local"/>
      <field name="no ack" domain="no ack"/>
      <field name="exclusive" type="bit"/>
      <field name="nowait" type="bit"/>
      <field name="arguments" type="table"/>
    </method>
    <method name="consume-ok" index="21" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <field name="consumer tag" domain="consumer tag"/>
    </method>
    <method name="cancel" index="30" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <response name="cancel-ok"/>
      <field name="consumer tag" domain="consumer tag"/>
      <field name="nowait" type="bit"/>
    </method>
    <method name="cancel-ok" index="31" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <field name="consumer tag" domain="consumer tag"/>
    </method>
    <method name="publish" content="1" index="40">
      <chassis name="server" implement="MUST"/>
      <field name="ticket" domain="access ticket"/>
      <field name="exchange" domain="exchange name"/>
      <field name="routing key" type="shortstr"/>
      <field name="mandatory" type="bit"/>
      <field name="immediate" type="bit"/>
    </method>
    <method name="return" content="1" index="50">
      <chassis name="client" implement="MUST"/>
      <field name="reply code" domain="reply code"/>
      <field name="reply text" domain="reply text"/>
      <field name="exchange" domain="exchange name"/>
      <field name="routing key" type="shortstr"/>
    </method>
    <method name="deliver" content="1" index="60">
      <chassis name="client" implement="MUST"/>
      <field name="consumer tag" domain="consumer tag"/>
      <field name="delivery tag" domain="delivery tag"/>
      <field name="redelivered" domain="redelivered"/>
      <field name="exchange" domain="exchange name"/>
      <field name="routing key" type="shortstr"/>
    </method>
    <method name="get" index="70" synchronous="1">
      <response name="get-ok"/>
      <response name="get-empty"/>
      <chassis name="server" implement="MUST"/>
      <field name="ticket" domain="access ticket"/>
      <field name="queue" domain="queue name"/>
      <field name="no ack" domain="no ack"/>
    </method>
    <method name="get-ok" content="1" index="71" synchronous="1">
      <chassis name="client" implement="MAY"/>
      <field name="delivery tag" domain="delivery tag"/>
      <field name="redelivered" domain="redelivered"/>
      <field name="exchange" domain="exchange name"/>
      <field name="routing key" type="shortstr"/>
      <field name="message count" type="long"/>
    </method>
    <method name="get-empty" index="72" synchronous="1">
      <chassis name="client" implement="MAY"/>
      <field name="cluster id" type="shortstr"/>
    </method>
    <method name="ack" index="80">
      <chassis name="server" implement="MUST"/>
      <field name="delivery tag" domain="delivery tag"/>
      <field name="multiple" type="bit"/>
    </method>
    <method name="reject" index="90">
      <chassis name="server" implement="MUST"/>
      <field name="delivery tag" domain="delivery tag"/>
      <field name="requeue" type="bit"/>
    </method>
    <method name="recover" index="100">
      <chassis name="server" implement="MUST"/>
      <field name="requeue" type="bit"/>
      <response name="recover-ok"/>
    </method>
    <method name="recover-ok" index="101" synchronous="1">
      <chassis name="client" implement="MUST"/>
    </method>
  </class>
  <class name="file" index="70" handler="channel">
    <chassis name="server" implement="MAY"/>
    <chassis name="client" implement="MAY"/>
    <field name="content type" type="shortstr"/>
    <field name="content encoding" type="shortstr"/>
    <field name="headers" type="table"/>
    <field name="priority" type="octet"/>
    <field name="reply to" type="shortstr"/>
    <field name="message id" type="shortstr"/>
    <field name="filename" type="shortstr"/>
    <field name="timestamp" type="timestamp"/>
    <field name="cluster id" type="shortstr"/>
    <method name="qos" index="10" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <response name="qos-ok"/>
      <field name="prefetch size" type="long"/>
      <field name="prefetch count" type="short"/>
      <field name="global" type="bit"/>
    </method>
    <method name="qos-ok" index="11" synchronous="1">
      <chassis name="client" implement="MUST"/>
    </method>
    <method name="consume" index="20" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <response name="consume-ok"/>
      <field name="ticket" domain="access ticket"/>
      <field name="queue" domain="queue name"/>
      <field name="consumer tag" domain="consumer tag"/>
      <field name="no local" domain="no local"/>
      <field name="no ack" domain="no ack"/>
      <field name="exclusive" type="bit"/>
      <field name="nowait" type="bit"/>
    </method>
    <method name="consume-ok" index="21" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <field name="consumer tag" domain="consumer tag"/>
    </method>
    <method name="cancel" index="30" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <response name="cancel-ok"/>
      <field name="consumer tag" domain="consumer tag"/>
      <field name="nowait" type="bit"/>
    </method>
    <method name="cancel-ok" index="31" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <field name="consumer tag" domain="consumer tag"/>
    </method>
    <method name="open" index="40" synchronous="1">
      <response name="open-ok"/>
      <chassis name="server" implement="MUST"/>
      <chassis name="client" implement="MUST"/>
      <field name="identifier" type="shortstr"/>
      <field name="content size" type="longlong"/>
    </method>
    <method name="open-ok" index="41" synchronous="1">
      <response name="stage"/>
      <chassis name="server" implement="MUST"/>
      <chassis name="client" implement="MUST"/>
      <field name="staged size" type="longlong"/>
    </method>
    <method name="stage" content="1" index="50">
      <chassis name="server" implement="MUST"/>
      <chassis name="client" implement="MUST"/>
    </method>
    <method name="publish" index="60">
      <chassis name="server" implement="MUST"/>
      <field name="ticket" domain="access ticket"/>
      <field name="exchange" domain="exchange name"/>
      <field name="routing key" type="shortstr"/>
      <field name="mandatory" type="bit"/>
      <field name="immediate" type="bit"/>
      <field name="identifier" type="shortstr"/>
    </method>
    <method name="return" content="1" index="70">
      <chassis name="client" implement="MUST"/>
      <field name="reply code" domain="reply code"/>
      <field name="reply text" domain="reply text"/>
      <field name="exchange" domain="exchange name"/>
      <field name="routing key" type="shortstr"/>
    </method>
    <method name="deliver" index="80">
      <chassis name="client" implement="MUST"/>
      <field name="consumer tag" domain="consumer tag"/>
      <field name="delivery tag" domain="delivery tag"/>
      <field name="redelivered" domain="redelivered"/>
      <field name="exchange" domain="exchange name"/>
      <field name="routing key" type="shortstr"/>
      <field name="identifier" type="shortstr"/>
    </method>
    <method name="ack" index="90">
      <chassis name="server" implement="MUST"/>
      <field name="delivery tag" domain="delivery tag"/>
      <field name="multiple" type="bit"/>
    </method>
    <method name="reject" index="100">
      <chassis name="server" implement="MUST"/>
      <field name="delivery tag" domain="delivery tag"/>
      <field name="requeue" type="bit"/>
    </method>
  </class>
  <class name="stream" index="80" handler="channel">
    <chassis name="server" implement="MAY"/>
    <chassis name="client" implement="MAY"/>
    <field name="content type" type="shortstr"/>
    <field name="content encoding" type="shortstr"/>
    <field name="headers" type="table"/>
    <field name="priority" type="octet"/>
    <field name="timestamp" type="timestamp"/>
    <method name="qos" index="10" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <response name="qos-ok"/>
      <field name="prefetch size" type="long"/>
      <field name="prefetch count" type="short"/>
      <field name="consume rate" type="long"/>
      <field name="global" type="bit"/>
    </method>
    <method name="qos-ok" index="11" synchronous="1">
      <chassis name="client" implement="MUST"/>
    </method>
    <method name="consume" index="20" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <response name="consume-ok"/>
      <field name="ticket" domain="access ticket"/>
      <field name="queue" domain="queue name"/>
      <field name="consumer tag" domain="consumer tag"/>
      <field name="no local" domain="no local"/>
      <field name="exclusive" type="bit"/>
      <field name="nowait" type="bit"/>
    </method>
    <method name="consume-ok" index="21" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <field name="consumer tag" domain="consumer tag"/>
    </method>
    <method name="cancel" index="30" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <response name="cancel-ok"/>
      <field name="consumer tag" domain="consumer tag"/>
      <field name="nowait" type="bit"/>
    </method>
    <method name="cancel-ok" index="31" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <field name="consumer tag" domain="consumer tag"/>
    </method>
    <method name="publish" content="1" index="40">
      <chassis name="server" implement="MUST"/>
      <field name="ticket" domain="access ticket"/>
      <field name="exchange" domain="exchange name"/>
      <field name="routing key" type="shortstr"/>
      <field name="mandatory" type="bit"/>
      <field name="immediate" type="bit"/>
    </method>
    <method name="return" content="1" index="50">
      <chassis name="client" implement="MUST"/>
      <field name="reply code" domain="reply code"/>
      <field name="reply text" domain="reply text"/>
      <field name="exchange" domain="exchange name"/>
      <field name="routing key" type="shortstr"/>
    </method>
    <method name="deliver" content="1" index="60">
      <chassis name="client" implement="MUST"/>
      <field name="consumer tag" domain="consumer tag"/>
      <field name="delivery tag" domain="delivery tag"/>
      <field name="exchange" domain="exchange name"/>
      <field name="queue" domain="queue name">
        <assert check="notnull"/>
      </field>
    </method>
  </class>
  <class name="tx" index="90" handler="channel">
    <rule implement="SHOULD"/>
    <chassis name="server" implement="SHOULD"/>
    <chassis name="client" implement="MAY"/>
    <method name="select" index="10" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <response name="select-ok"/>
    </method>
    <method name="select-ok" index="11" synchronous="1">
      <chassis name="client" implement="MUST"/>
    </method>
    <method name="commit" index="20" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <response name="commit-ok"/>
    </method>
    <method name="commit-ok" index="21" synchronous="1">
      <chassis name="client" implement="MUST"/>
    </method>
    <method name="rollback" index="30" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <response name="rollback-ok"/>
    </method>
    <method name="rollback-ok" index="31" synchronous="1">
      <chassis name="client" implement="MUST"/>
    </method>
  </class>
  <class name="dtx" index="100" handler="channel">
    <chassis name="server" implement="MAY"/>
    <chassis name="client" implement="MAY"/>
    <method name="select" index="10" synchronous="1">
      <chassis name="server" implement="MUST"/>
      <response name="select-ok"/>
    </method>
    <method name="select-ok" index="11" synchronous="1">
      <chassis name="client" implement="MUST"/>
    </method>
    <method name="start" index="20" synchronous="1">
      <chassis name="server" implement="MAY"/>
      <response name="start-ok"/>
      <field name="dtx identifier" type="shortstr">
        <assert check="notnull"/>
      </field>
    </method>
    <method name="start-ok" index="21" synchronous="1">
      <chassis name="client" implement="MUST"/>
    </method>
  </class>
  <class name="tunnel" index="110" handler="tunnel">
    <chassis name="server" implement="MAY"/>
    <chassis name="client" implement="MAY"/>
    <field name="headers" type="table"/>
    <field name="proxy name" type="shortstr"/>
    <field name="data name" type="shortstr"/>
    <field name="durable" type="octet"/>
    <field name="broadcast" type="octet"/>
    <method name="request" content="1" index="10">
      <chassis name="server" implement="MUST"/>
      <field name="meta data" type="table"/>
    </method>
  </class>
  <class name="test" index="120" handler="channel">
    <chassis name="server" implement="MUST"/>
    <chassis name="client" implement="SHOULD"/>
    <method name="integer" index="10" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <chassis name="server" implement="MUST"/>
      <response name="integer-ok"/>
      <field name="integer 1" type="octet"/>
      <field name="integer 2" type="short"/>
      <field name="integer 3" type="long"/>
      <field name="integer 4" type="longlong"/>
      <field name="operation" type="octet">
        <assert check="enum">
          <value name="add"/>
          <value name="min"/>
          <value name="max"/>
        </assert>
      </field>
    </method>
    <method name="integer-ok" index="11" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <chassis name="server" implement="MUST"/>
      <field name="result" type="longlong"/>
    </method>
    <method name="string" index="20" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <chassis name="server" implement="MUST"/>
      <response name="string-ok"/>
      <field name="string 1" type="shortstr"/>
      <field name="string 2" type="longstr"/>
      <field name="operation" type="octet">
        <assert check="enum">
          <value name="add"/>
          <value name="min"/>
          <value name="max"/>
        </assert>
      </field>
    </method>
    <method name="string-ok" index="21" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <chassis name="server" implement="MUST"/>
      <field name="result" type="longstr"/>
    </method>
    <method name="table" index="30" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <chassis name="server" implement="MUST"/>
      <response name="table-ok"/>
      <field name="table" type="table"/>
      <field name="integer op" type="octet">
        <assert check="enum">
          <value name="add"/>
          <value name="min"/>
          <value name="max"/>
        </assert>
      </field>
      <field name="string op" type="octet">
        <assert check="enum">
          <value name="add"/>
          <value name="min"/>
          <value name="max"/>
        </assert>
      </field>
    </method>
    <method name="table-ok" index="31" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <chassis name="server" implement="MUST"/>
      <field name="integer result" type="longlong"/>
      <field name="string result" type="longstr"/>
    </method>
    <method name="content" content="1" index="40" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <chassis name="server" implement="MUST"/>
      <response name="content-ok"/>
    </method>
    <method name="content-ok" content="1" index="41" synchronous="1">
      <chassis name="client" implement="MUST"/>
      <chassis name="server" implement="MUST"/>
      <field name="content checksum" type="long"/>
    </method>
  </class>
</amqp>
