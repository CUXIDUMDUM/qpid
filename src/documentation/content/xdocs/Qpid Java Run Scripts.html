<html>
    <head>
        <title>Apache Qpid : Qpid Java Run Scripts</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Apache Qpid : Qpid Java Run Scripts
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Apr 06, 2007 by <font color="#0050B2">mmccorma</font>.
				    </div>

				    <h1><a name="QpidJavaRunScripts-QpidJavaBrokerRunScripts"></a>Qpid Java Broker Run Scripts</h1>

<p>The following scripts are used to run the Qpid broker:</p>

<p>qpid-server<br/>
qpid-server.bat<br/>
qpid-run</p>

<p>These scripts are described in more detail below. </p>

<h2><a name="QpidJavaRunScripts-qpidserver"></a>qpid-server</h2>

<h3><a name="QpidJavaRunScripts-Overview"></a>Overview</h3>

<p>This script starts the Qpid Java Broker on Linux/Solaris/Cygwin platforms.</p>

<p>It is extremely simple, delegating the real work to the qpid-run script.</p>

<p>In fact, all it really provides is the main class to execute and passes through any command line arguments to qpid-run i.e.</p>

<div class="preformatted"><div class="preformattedContent">
<pre>. qpid-run org.apache.qpid.server.Main "$@"
</pre>
</div></div>

<h2><a name="QpidJavaRunScripts-qpidserver.bat"></a>qpid-server.bat</h2>

<h3><a name="QpidJavaRunScripts-Overview"></a>Overview</h3>

<p>This script starts the Qpid Java Broker on Windows platforms. It provides a limited version of the qpid-run functionality, though is not nearly as sophisticated i.e. does not support run arguments or the full set of argument variables.</p>

<p>However, it does support the following features:</p>

<ul>
	<li>validates that JAVA_HOME is set</li>
	<li>validates that QPID_HOME is set</li>
	<li>passes any command line arguments to the main broker class</li>
	<li>supports the use of QPID_OPTS to pass through java system properties</li>
</ul>


<p>Note that a JIRA exists for enhancing the features this script supports <a href="http://issues.apache.org/jira/browse/QPID-168" title="Visit page outside Confluence">http://issues.apache.org/jira/browse/QPID-168</a></p>

<h2><a name="QpidJavaRunScripts-qpidrun"></a>qpid-run</h2>

<h3><a name="QpidJavaRunScripts-Overview"></a>Overview</h3>

<p>The qpid-run script allows the calling program to run any given command, and provides a flexible surround supporting configurable runtime arguments for the script itself, the broker and java arguments.</p>

<h3><a name="QpidJavaRunScripts-EnvironmentVariablesandDefaulting"></a>Environment Variables and Defaulting</h3>

<p>The variables noted below are used by the qpid-run script. Any default value used if not </p>

<p>specified is noted below.</p>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>Variable</th>
<th class='confluenceTh'>Description</th>
<th class='confluenceTh'>Default</th>
</tr>
<tr>
<td class='confluenceTd'>QPID_HOME</td>
<td class='confluenceTd'>Used as root for installed application path. Mandatory that users set this</td>
<td class='confluenceTd'>None</td>
</tr>
<tr>
<td class='confluenceTd'>QPID_WORK</td>
<td class='confluenceTd'>Used as root for any working directories to which the Qpid broker writes, for <br/>
logging and bdb etc</td>
<td class='confluenceTd'>Current User's Homedir</td>
</tr>
<tr>
<td class='confluenceTd'>AMQJ_LOGGING_LEVEL</td>
<td class='confluenceTd'>Logging level for broker code</td>
<td class='confluenceTd'>info</td>
</tr>
<tr>
<td class='confluenceTd'>QPID_LOG_PREFIX</td>
<td class='confluenceTd'>Used as a prefix for qpid broker log, see FAQ for more details</td>
<td class='confluenceTd'>None</td>
</tr>
<tr>
<td class='confluenceTd'>QPID_LOG_SUFFIX</td>
<td class='confluenceTd'>Used as a suffix for qpid broker log, see FAQ for more details</td>
<td class='confluenceTd'>None</td>
</tr>
<tr>
<td class='confluenceTd'>JPDA_OPTS</td>
<td class='confluenceTd'>If set and -run:jpda argument provided used for debugging props, see below</td>
<td class='confluenceTd'>None</td>
</tr>
<tr>
<td class='confluenceTd'>QPID_OPTS</td>
<td class='confluenceTd'>Use to pass custom system properties, including management console connection <br/>
info</td>
<td class='confluenceTd'>None</td>
</tr>
<tr>
<td class='confluenceTd'>JAVA_OPTS</td>
<td class='confluenceTd'>Use to pass custom Java options, for example gc options etc</td>
<td class='confluenceTd'>None</td>
</tr>
</tbody></table>

<h3><a name="QpidJavaRunScripts-RunArguments"></a>Run Arguments</h3>

<p>You can provide run arguments to the qpid-run script using the syntax</p>

<div class="preformatted"><div class="preformattedContent">
<pre>-run:argument
</pre>
</div></div>

<p>The table below provides details of the available arguments.</p>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>Argument</th>
<th class='confluenceTh'>Description</th>
</tr>
<tr>
<td class='confluenceTd'>debug</td>
<td class='confluenceTd'>Prints classpath and command before running it</td>
</tr>
<tr>
<td class='confluenceTd'>jpda</td>
<td class='confluenceTd'>Adds remote debugging info using JPDA_OPTS. Use JPDA_TRANSPORT and JPDA_ADDRESS to <br/>
customize, JPDA_OPTS to override</td>
</tr>
<tr>
<td class='confluenceTd'>external-classpath</td>
<td class='confluenceTd'>Valid values are: ignore, first, last and only. See below for more info</td>
</tr>
<tr>
<td class='confluenceTd'>print-classpath</td>
<td class='confluenceTd'>Prints classpath before running command</td>
</tr>
<tr>
<td class='confluenceTd'>help</td>
<td class='confluenceTd'>Prints Usage information</td>
</tr>
</tbody></table>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="border/border_bottom.gif"><img src="border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Apr 22, 2008 02:47</font></td>
		    </tr>
	    </table>
    </body>
</html>