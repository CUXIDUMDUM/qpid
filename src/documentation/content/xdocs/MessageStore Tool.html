<html>
    <head>
        <title>Apache Qpid : MessageStore Tool</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Apache Qpid : MessageStore Tool
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jul 05, 2007 by <font color="#0050B2">ritchiem</font>.
				    </div>

				    <p>h2 MessageStore Tool</p>

<p>We have a number of implementations of MessageStore this tool allows the interrogation of these stores while the broker is offline. </p>

<h3><a name="MessageStoreTool-MessageStoreImplementations"></a>MessageStore Implementations</h3>
<ul><li><a href="BDBMessageStore (3rd Party).html" title="BDBMessageStore (3rd Party)">BDBMessageStore (3rd Party)</a></li><li><a href="JDBCStore.html" title="JDBCStore">JDBCStore</a></li><li><a href="MemoryMessageStore.html" title="MemoryMessageStore">MemoryMessageStore</a></li></ul>


<h3><a name="MessageStoreTool-Introduction"></a>Introduction</h3>
<p>Each of the MessageStore implementations provide different back end storage for their messages and so would need a different tool to be able to interrogate their contents. What this tool does is to utilise the Java broker code base to access the contents of the storage providing the user with a consistent means to inspect the storage contents. The tool allows the current messages in the store to be inspected and copied/moved between queues.</p>


<h3><a name="MessageStoreTool-Usage"></a>Usage</h3>

<p>The tools-distribution currently includes a unix shell command 'msTool.sh' this script will launch the java tool.</p>

<p>The tool loads $QPID_HOME/etc/config.xml by default. If an alternative broker configuration is required this should be provided on the command line as would be done for the broker.</p>

<div class="preformatted"><div class="preformattedContent">
<pre>msTool.sh -c &lt;path to different config.xml&gt;
</pre>
</div></div>

<p>On startup the user is present with a command prompt</p>

<div class="preformatted"><div class="preformattedContent">
<pre>$ msTool.sh
MessageStoreTool - for examining Persistent Qpid Broker MessageStore instances
bdb$ 
</pre>
</div></div>

<h3><a name="MessageStoreTool-AvailableCommands"></a>Available Commands</h3>

<p>The available commands in the tool can be seen through the use of the 'help' command.</p>

<div class="preformatted"><div class="preformattedContent">
<pre>bdb$ help
+----------------------------------------------------------------+
|                       Available Commands                       |
+----------------------------------------------------------------+
| Command | Description                                          |
+----------------------------------------------------------------+
| quit    | Quit the tool.                                       |
| list    | list available items.                                |
| dump    | Dump selected message content. Default: show=content |
| load    | Loads specified broker configuration file.           |
| clear   | Clears any selection.                                |
| show    | Shows the messages headers.                          |
| select  | Perform a selection.                                 |
| help    | Provides detailed help on commands.                  |
+----------------------------------------------------------------+
bdb$
</pre>
</div></div>


<p>A brief description is displayed and further usage information is shown with 'help &lt;command&gt;'</p>

<div class="preformatted"><div class="preformattedContent">
<pre>bdb$ help list
list availble items.
Usage:list queues [&lt;exchange&gt;] | exchanges | bindings [&lt;exchange&gt;] | all
bdb$
</pre>
</div></div>


<h3><a name="MessageStoreTool-FutureWork"></a>Future Work</h3>

<p>Currently the tool only works whilst the broker is offline. If this functionality was incorporated into the broker then a telnet functionality could be provided allowing online management.</p>










				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="border/border_bottom.gif"><img src="border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Apr 22, 2008 02:47</font></td>
		    </tr>
	    </table>
    </body>
</html>